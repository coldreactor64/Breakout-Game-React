(this["webpackJsonpbreakout-game"]=this["webpackJsonpbreakout-game"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(5),o=n.n(a),c=(n(13),n(14),n(3)),u=n(2),s=function(e,t){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}},l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[Math.floor(Math.random()*t.length)]},h=["#4ABFF0","#F23737","#835995","#9FCE31","#FFCC00"],d=function(e){var t=e.x,n=e.y,r=e.radius;return i.a.createElement("circle",{className:"ball",cx:t,cy:n,r:r})},f=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.density;return i.a.createElement("rect",{className:"block",fill:h[o],x:t,y:n,rx:r/16,width:r-5,height:a-3})},v=function(e){var t=e.level,n=e.unit;return i.a.createElement("text",{x:n,y:2*n,className:"level"},"LEVEL: ",t)},w=function(e){var t,n=e.lives,r=e.containerWidth,a=e.unit,o=2*a;return(t=n,Object(u.a)(Array(t).keys())).map((function(e){return i.a.createElement("rect",{className:"life",rx:a/4,height:a,width:o,y:a,x:r-a-o*(e+1)-a/2*e,key:e})}))},m=function(e){var t=e.x,n=e.y,r=e.width,a=e.height;return i.a.createElement("rect",{className:"paddle",x:t,y:n,width:r,height:a,rx:r/16})},p=n(6),g=n(7),y=function(){function e(t,n){Object(p.a)(this,e),this.x=t,this.y=n}return Object(g.a)(e,[{key:"scaleBy",value:function(t){return new e(this.x*t,this.y*t)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}},{key:"add",value:function(t){var n=t.x,r=t.y;return new e(this.x+n,this.y+r)}},{key:"normalize",value:function(){return this.scaleBy(1/this.length())}},{key:"subtract",value:function(t){var n=t.x,r=t.y;return new e(this.x-n,this.y-r)}},{key:"dotProduct",value:function(e){var t=e.x,n=e.y;return this.x*t+this.y*n}},{key:"projectOn",value:function(t){var n=this.dotProduct(t)/t.length();return new e(n*t.x,n*t.y)}},{key:"reflect",value:function(e){return this.subtract(this.projectOn(e).scaleBy(2))}},{key:"rotate",value:function(t){var n=function(e){return e*Math.PI/180}(t),r=Math.cos(n),i=Math.sin(n);return new e(this.x*r-this.y*i,this.x*i+this.y*r)}},{key:"crossProduct",value:function(e){var t=e.x,n=e.y;return this.x*n-t*this.y}},{key:"angleBetween",value:function(e){return 180*Math.atan2(this.crossProduct(e),this.dotProduct(e))/Math.PI}}]),e}(),b=function(e,t){var n=Object(u.a)(Array(t));return n=function(e,t,n){var r=(11-t)/2+1.375,i=(9-n)/2;return e.map((function(e,t){return e.map((function(e,n){return{density:Math.floor(3*Math.random()),position:new y(n+i,r+1*t/3),width:1,height:.25}}))}))}(n=n.map((function(t){return Object(u.a)(Array(e))})),t,e),n.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t))}),[])},j=[{lives:3,paddleWidth:2.5,speed:1,blocks:b(6,4),width:9,height:11},{lives:4,paddleWidth:3,speed:1.4,blocks:b(7,5),width:9,height:11},{lives:5,paddleWidth:2.5,speed:1.8,blocks:b(8,7),width:9,height:11},{lives:6,paddleWidth:2,speed:2,blocks:b(9,11),width:9,height:11}],O=n(1),k="LEFT",E="RIGHT",x=new y(-1,0),M=new y(1,0),z=new y(0,-1),P=new y(0,1),D=x.add(z).normalize(),I=M.add(z).normalize(),R=function(e,t,n){var r=t-1/3-.06;return{paddle:{position:new y((e-n)/2,r),width:n,height:1/3},ball:{center:new y(t/2,r-.4),radius:.2,direction:l(D,I)}}},T=function(e){var t=e.lives,n=e.paddleWidth,r=e.speed,i=e.blocks,a=e.width,o=e.height;return Object(O.a)({size:{width:a,height:o},blocks:i,speed:r,lives:t},R(a,o,n))},B=function(e,t){var n=e.width/t.width,r=e.height/t.height,i=Math.min(r,n);return{projectDistance:function(e){return e*i},projectDistanceReverse:function(e){return e/i},projectVector:function(e){return e.scaleBy(i)}}},N=function(e,t,n,r){return e>=n&&e<=r||t>=n&&t<=r},L=function(e,t,n){var r=e.size,i=e.speed,a=e.lives,o=(e.containerSize,.005*n*i),c=function(e,t,n,r){if(!r)return e;var i=r===k?x:M,a=e.position.add(i.scaleBy(n)).x,o=function(t){return Object(O.a)({},e,{position:new y(t,e.position.y)})};return a<0?o(0):a+e.width>t.width?o(t.width-e.width):o(a)}(e.paddle,r,o,t),u=(function(e,t,n,r,i,a){if(r===i)return e;var o=a(i.mouseX),c=function(t){return Object(O.a)({},e,{position:new y(o,e.position.y)})};o<0?c():o+e.width>t.width&&c((t.width,e.width))}(e.paddle,r,0,e.oldMousePosition,e.newMousePosition,e.projectDistanceReverse),e.ball.radius),s=e.ball.direction,l=e.ball.center.add(s.scaleBy(o)),h=l.y+u;if(h>r.height)return Object(O.a)({},e,{},R(r.width,r.height,c.width),{lives:a-1});var d=function(t){return Object(O.a)({},e,{paddle:c,ball:Object(O.a)({},e.ball,{},t)})},f=function(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=e.angleBetween(t),i=90-n;if(r<0){if(r>-n)return e.rotate(-n);if(r<-i)return e.rotate(-i)}else{if(r<n)return e.rotate(n);if(r>i)return e.rotate(i)}return t}(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=function(){return Math.random()*t-t/2},r=new y(n(),n());return e.add(r).normalize()}(s.reflect(e)));return d({direction:t})},v=l.x-u,w=l.x+u,m=l.y-u,p=c.position.x,g=p+c.width,b=c.position.y;if(Math.abs(z.angleBetween(s))>90&&h>=b&&w>=p&&v<=g)return f(z);if(m<=0)return f(P);if(v<=0)return f(M);if(w>=r.width)return f(x);var j,E,D=e.blocks.find((function(e){var t=e.position,n=e.width,r=e.height;return N(m,h,t.y,t.y+r)&&N(v,w,t.x,t.x+n)}));if(D){var I=D.density-1,T=Object(O.a)({},D,{density:I}),B=I<0?(j=e.blocks,E=D,j.filter((function(e){return e!==E}))):function(e,t,n){return e.map((function(e){return e===t?n:e}))}(e.blocks,D,T);return Object(O.a)({},f(function(){var e=D.position.y,t=e+D.height,n=D.position.x;if(m>e-u&&h<t+u){if(v<n)return x;if(w>n+D.width)return M}return m>e?P:m<=e?z:void 0}()),{blocks:B})}return d({center:l})},S="CONTAINER_SIZE_CHANGE",W="KEY_DOWN",A="KEY_UP",F="MOUSE_MOVE",C="TICK",V={LEFT:[65,37,"ArrowLeft"],RIGHT:[68,39,"ArrowRight"]},X=function(e,t){var n=t.type,r=t.payload;switch(n){case S:return console.log(r),_(e,r);case A:return K(e,r);case W:return G(e,r);case F:return H(e,r);case C:return J(e);default:return e}},_=function(e,t){return Object(O.a)({},e,{containerSize:t},B(t,e.game.size))},G=function(e,t){return V.LEFT.includes(t)?(console.log(e),Object(O.a)({},e,{movement:k})):V.RIGHT.includes(t)?Object(O.a)({},e,{movement:E}):e},H=function(e,t){return Object(O.a)({},e,{oldMousePosition:e.newMousePosition,newMousePosition:t})},K=function(e,t){var n=Object(O.a)({},e,{movement:void 0});return 32===t?(console.log("stop key"),e.stopTime?Object(O.a)({},n,{stopTime:void 0,time:e.time+Date.now()-e.stopTime}):Object(O.a)({},n,{stopTime:Date.now()})):n},J=function(e){if(e.stopTime)return e;var t=Date.now(),n=L(Object(O.a)({},e.game,{},e),e.movement,t-e.time),r=Object(O.a)({},e,{time:t});if(n.lives<1)return Object(O.a)({},r,{game:T(j[e.level])});if(n.blocks.length<1){var i=e.level===j.length?e.level:e.level+1;localStorage.setItem("level",i);var a=T(j[e.level]);return Object(O.a)({},r,{level:i,game:a},B(e.containerSize,a.size))}return Object(O.a)({},r,{game:n})},U=function(){var e=Object(r.useRef)(),t=Object(r.useState)(),n=Object(c.a)(t,2),a=n[0],o=n[1],u=Object(r.useState)(),l=Object(c.a)(u,2),h=l[0],d=l[1];return Object(r.useEffect)((function(){var t=function(){var t=e.current.getBoundingClientRect(),n=t.width,r=t.height;o({width:n,height:r})},n=s("resize",t),r=s("mousemove",(function(e){return function(e){d(e.clientX)}(e)}));return t(),{unregisterResizeListener:n,unregisterMouseListener:r}}),[]),i.a.createElement("div",{className:"page"},i.a.createElement("div",{className:"scene-container",ref:e},a&&i.a.createElement(Z,{width:a.width,height:a.height,mouseX:h,variable2:3})))},Y=function(e){var t=function(){var e=localStorage.getItem("level");return e?parseInt(e,10):0}(),n=T(j[t]),r=B(e,n.size);return{level:t,game:n,containerSize:e,projectDistance:r.projectDistance,projectVector:r.projectVector,projectDistanceReverse:r.projectDistanceReverse,oldMousePosition:0,newMousePosition:0,time:Date.now(),stopTime:void 0,movement:void 0}},Z=function(e){var t=Object(r.useReducer)(X,e,Y),n=Object(c.a)(t,2),a=n[0],o=n[1],u=function(e,t){return o({type:e,payload:t})},l=a.projectDistance,h=a.projectVector,p=(a.projectDistanceReverse,a.level),g=a.game,y=g.blocks,b=g.paddle,j=g.ball,O=g.size,k=O.width,E=O.height,x=g.lives;Object(r.useEffect)((function(){return u(S,{width:e.width,height:e.height})}),[e.width,e.height]),Object(r.useEffect)((function(){return u(F,{mouseX:e.mouseX})}),[e.mouseX]),Object(r.useEffect)((function(){var e=setInterval((function(){return u(C,a)}),1e3/144),t=s("keydown",(function(e){var t=e.which;return u(W,t)})),n=s("keyup",(function(e){var t=e.which;return u(A,t)}));return function(){clearInterval(e),t(),n()}}),[]);var M=l(k),z=l(E),P=l(j.radius);return i.a.createElement("svg",{width:M,height:z,className:"scene"},i.a.createElement(v,{unit:P,level:p+1}),i.a.createElement(w,{lives:x,containerWidth:M,unit:P}),y.map((function(e){var t=e.density,n=e.position,r=e.width,a=e.height;return i.a.createElement(f,Object.assign({density:t,key:"".concat(n.x,"-").concat(n.y),width:l(r),height:l(a)},h(n)))})),i.a.createElement(m,Object.assign({width:l(b.width),height:l(b.height)},h(b.position))),i.a.createElement(d,Object.assign({},h(j.center),{radius:P})))};var $=function(){return i.a.createElement(U,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.8aa997eb.chunk.js.map